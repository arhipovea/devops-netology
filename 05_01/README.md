# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

---

Аппаратная виртуализация: гипервизор ставится на голое железо, должна быть поддержка процессора, по идее максимальная производительность. VMware ESXi, Hyper-V core.

Паравиртуализация: гипервизор ставится, поверх ОС, как программа. В ВМ должна быть поддержка модификации ядра или должен быть тот же вендор(например майкрософт). Hyper-V(как роль ОС).

Виртуализация на основе ОС: ВМ используется ядро хостовой ОС, но сама изолирована. Docker.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

---

Высоконагруженная база данных, чувствительная к отказу - физический сервер, но в кластере. паравиртуализация - но опять таки в кластере и на разных нодах. Предусмотреть, чтобы узким местом небыло СХД.

Различные web-приложения - виртуализация уровня ОС, каждое веб приложение в отдельном контейнере, удобно разрабатывать, разворачивать окружения, следить за версиями, разносить на дев/стейдж/прод.

Windows системы для использования бухгалтерским отделом - паравиртуализация, можно гибко управлять ресурсами, если идёт речь о 1С, то, особенно если БД на одельной машине, проще переходить с версий на версии, можно развернуть кластер, удобно обновлять.

Системы, выполняющие высокопроизводительные расчеты на GPU - физичекий сервер. Никогда с таким не работал, но даже не уверен, что виртуализация тут вообще возможна.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

---

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий. - если ест ьбюджет, то я бы развернул всё на VMware, поднял бы сферу. Для резервнях копий накатил бы какой нибудь veeam, очень удобно бекапить. Если денег меньше, то можно развернуть всё на кластере Hyper-V, для бекапов поставить какой нить майкрософтовский DPM, ливмигрейшн поддерживается, балансировка нагрузки есть.

Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин. - можно поставить KVM c proxmox, но по ощущениям, максимальная производительность винды на Hyper-V, ибо ядро ОС закрыто и внутри ВМ ОС не будет знать, что она работает на виртуалке(как я понимаю).

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры. - Hyper-V core, гипервизор бесплатный и родной для Windows. Хотя можно и VMware ESXi, но тогда, если несколько физических серверов, то нет единого места управления.

Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux. - Docker, бастро разворачиваем, быстро сворачиваем, всё гибко.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

---

Сейчас работаю в компании, в которой Hyper-V и VMware, так исторически сложилось. С бекапами проблем нет, ибо используем veeam, он и там и там работает прекрасно. Из "проблем" (хотя не такая уж это и проблема), это два места для администрирования ВМ, сфера для вмвари, ну и стадартная оснастка винды для администрирования failover кластера, в общем не очень удобно. Ещё не очень удобно, что все ВМ находятся как бы в двух непересекающихся кластерах, конвертировать туда обратно вроде как возможно, но это танцы с бубнами, внутри кластеров машинки ездят с ноды на ноду без проблем. 
Была бы возможность, я бы не использовал гетерогенную среду, я за определённый стек и за единообразие, это удобно. 
